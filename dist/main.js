(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}};e.d({},{c:()=>f});var t={};e.r(t),e.d(t,{c:()=>f});class n{constructor(e,t,n){this.id=e,this.title=t,this.tasks=n}}function a(){return Math.floor(1e8*Math.random())}let l,d,c,o,i,r,s,u,p,m,h,y,k,f,C=document.querySelector(".projects");function E(){l.outerHTML=""}function S(){let e=!1,t=!1,d=a(),c=l.querySelector("input").value,o=new n(d,c,[]);t=L(o.title),t&&(e=!0,f.push(o),localStorage.setItem("allProjects",JSON.stringify(f))),e&&(b(o),location.reload()),E()}function b(e){let t=C.querySelector("ul"),n=document.createElement("li");n.classList.add("project"),n.innerText=e.title,n.setAttribute("id",e.title);let a=document.createElement("span");a.classList.add("number-of-tasks"),a.innerText="         "+e.tasks.length,n.appendChild(a),t.appendChild(n),C.appendChild(t)}function L(e){let t=!1,n="",a=function(e){let t=!1;return f.map((n=>{n.title.toLowerCase()==e.toLowerCase()&&(t=!0)})),t}(e);a&&(n="Project with that name already exists.");let l=e.length<1;l&&(n="Project name can't be empty.");let d=e.length>=25;d&&(n="Project name is too long.");let c=function(e){let t="all tasks"==e.toLowerCase();return t=t||"today"==e.toLowerCase(),t=t||"this week"==e.toLowerCase(),t}(e);return c&&(n="Project name can't be the same as the main option name."),document.querySelector(".error-message").innerText=n,t=0==a,t=t&&0==l,t=t&&0==d,t=t&&0==c,t}f||(f=[]);class g{constructor(e,t,n,a,l){this.id=e,this.title=t,this.date=a,this.description=n,this.priority=l}}function v(){const e=new Date;let t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate();return n<10&&(n="0"+n),a<10&&(a="0"+a),t.toString()+"-"+n.toString()+"-"+a.toString()}function q(e,t){d=document.createElement("div"),d.classList.add("confirmation-modal");let n=document.createElement("div");n.classList.add("confirmation-container"),n.classList.add("modal-window");const a=document.createElement("div");a.classList.add("modal-top");let l=document.createElement("h3");"add"==e?l.innerText="Add New Task":"update"==e&&(l.innerText="Update Task");let c=document.createElement("span");c.classList.add("close-modal"),c.innerText="&times;  ",a.appendChild(l),a.appendChild(c);let o=document.createElement("div");o.classList.add("container-task-info");let i=document.createElement("form"),r=document.createElement("span");r.innerText="*";let s=document.createElement("div");s.classList.add("container-input");let u=document.createElement("label");u.innerText="Title",u.appendChild(r);let p=document.createElement("input");p.classList.add("task-name"),"update"==e&&(p.value=t.title);let m=document.createElement("span");m.classList.add("error-message"),m.appendChild(r),s.appendChild(u),s.appendChild(p),s.appendChild(m);let h=document.createElement("div");h.classList.add("container-input");let y=document.createElement("label");y.innerText="Date",y.appendChild(r);let k=document.createElement("input");if(k.type="date",k.classList.add("task-date"),"update"==e)k.value=t.date;else if("add"==e){let e=v();k.value=e}let C=document.createElement("span");C.classList.add("error-message"),C.appendChild(r),h.appendChild(y),h.appendChild(k),h.appendChild(C);let E=document.createElement("div");E.classList.add("container-input");let S=document.createElement("label");S.innerText="Description",S.appendChild(r);let b=document.createElement("textarea");b.classList.add("task-description"),"update"==e&&(b.value=t.description);let L=document.createElement("span");L.classList.add("error-message"),L.appendChild(r),E.appendChild(S),E.appendChild(b),E.appendChild(L);let g=document.createElement("div");g.classList.add("container-input");let q=document.createElement("label");q.innerText="Priority",q.appendChild(r);let w=document.createElement("select");w.classList.add("task-priority");let P=document.createElement("option");P.innerText="Low",P.setAttribute("value","low"),P.setAttribute("selected","selected");let A=document.createElement("option");A.innerText="Medium",A.setAttribute("value","medium");let O=document.createElement("option");O.innerText="High",O.setAttribute("value","high"),w.appendChild(P),w.appendChild(A),w.appendChild(O),"update"==e&&(w.value=t.priority);let N=document.createElement("span");N.classList.add("error-message"),N.appendChild(r),g.appendChild(q),g.appendChild(w),g.appendChild(N);let D=document.createElement("button");D.setAttribute("type","submit"),"add"==e?(D.innerText="Add task",D.addEventListener("click",J)):"update"==e&&(D.innerText="Update task",D.addEventListener("click",(function(e){e.preventDefault(),function(e){let t=document.querySelector("input.task-name").value,n=document.querySelector("input.task-date").value,a=document.querySelector("textarea.task-description").value,l=document.querySelector("select.task-priority").value;e.title=t,e.date=n,e.description=a,e.priority=l;let d=!1;d=j(e),d&&(localStorage.setItem("allProjects",JSON.stringify(f)),T())}(t)})));let M=document.createElement("button");return M.innerText="Cancel",M.setAttribute("type","button"),M.addEventListener("click",x),i.appendChild(s),i.appendChild(h),i.appendChild(E),i.appendChild(g),i.appendChild(D),i.appendChild(M),o.appendChild(i),n.appendChild(a),n.appendChild(o),d.appendChild(n),d}function x(){document.querySelector(".modal-window").remove(),d.style.display="none"}function T(){let e=document.querySelector(".project-name").textContent,t=document.querySelector(`[id="${e}" ]`);t.addEventListener("click",Y),t.click()}function j(e){let t=!0,n="";return e.title.length<1&&(n="Task name can't be empty."),e.title.length>30&&(n="Task name can't be longer than 30 characters."),e.description.length>300&&(n="Task description can't be longer than 300 characters."),t=""==n,t||alert(n),t}function w(){return c=[],f.forEach((e=>{e.tasks.forEach((e=>{c.push(e)}))})),c}function P(){let e=w();document.querySelector(".all-tasks-number-of-tasks").textContent=e.length}function A(){let e=[],t=v();return c.forEach((n=>{n.date==t&&e.push(n)})),e}function O(){let e=A();document.querySelector(".today-tasks-number-of-tasks").textContent=e.length}function N(){let e=[],t=v(),n=function(){const e=new Date;let t=new Date(e.getTime()-6048e5),n=t.getFullYear(),a=t.getMonth()+1,l=t.getDate();return a<10&&(a="0"+a),l<10&&(l="0"+l),t=n.toString()+"-"+a.toString()+"-"+l.toString(),t}();return c.forEach((a=>{a.date<=t&&a.date>=n&&e.push(a)})),e}function D(){let e=N();document.querySelector(".this-week-tasks-number-of-tasks").textContent=e.length}function M(e,n){let a=document.querySelector(`[id="${o.title}" ]`).querySelector(".number-of-tasks");return a.textContent=n,"increase"==e?t.totalNumberOfTasks++:"decrease"==e&&t.totalNumberOfTasks--,P(),O(),D(),a}function I(e){for(let t=0;t<f.length;t++){let n=f[t].tasks;for(let a=0;a<n.length;a++){let l=n[a];e.id==l.id&&(f[t].tasks.splice(a,1),localStorage.setItem("allProjects",JSON.stringify(f)),o=f[t],M("decrease",f[t].tasks.length))}}T()}function J(e){e.preventDefault();let t=a(),n=document.querySelector("input.task-name").value,l=document.querySelector("input.task-date").value,d=document.querySelector("textarea.task-description").value,c=document.querySelector("select.task-priority").value,i=document.querySelector(".tasks-container").querySelector(".tasks-list"),r=!1,s=!1,u=new g(t,n,d,l,c);s=j(u),s&&(r=!0,o.tasks.push(u),M("increase",o.tasks.length)),r&&(x(),i.appendChild(H(u)),localStorage.setItem("allProjects",JSON.stringify(f)))}function H(e){let t=document.createElement("div");t.classList.add("task");let n=document.createElement("span");n.classList.add("task-date"),n.innerText=e.date;let a=document.createElement("h4");a.classList.add("task-title"),a.innerText=e.title;let l=document.createElement("span");l.classList.add("task-description"),l.innerText=e.description;let d=document.createElement("div");d.classList.add("tasks-btns");let c=document.createElement("button");c.classList.add("btn-done-task"),c.addEventListener("click",(function(){I(e)}));let o=document.createElement("i");o.classList.add("fa"),o.classList.add("fa-check"),c.appendChild(o);let i=document.createElement("button");i.classList.add("btn-edit-task"),i.innerText="pen",i.addEventListener("click",(function(){!function(e){document.querySelector(".tasks-container").appendChild(q("update",e))}(e)}));let r=document.createElement("button");return r.classList.add("btn-delete-task"),r.innerText="trash-can",r.addEventListener("click",(function(){I(e)})),d.appendChild(c),d.appendChild(i),d.appendChild(r),t.appendChild(n),t.appendChild(a),t.appendChild(l),t.appendChild(d),t}function Y(){let e;if("none"!=document.querySelector(".project-name").style.display){switch(i=this.id,i){case"All tasks":e=w();break;case"Today":e=A();break;case"This week":e=N();break;default:e=function(e){let t=f.find((t=>t.title==e));return o=t,t.tasks}(i)}document.querySelector(".tasks-list").innerHTML="",function(e,t){let n=document.querySelector(".tasks-container"),a=n.querySelector(".project-name"),l=n.querySelector(".tasks-list");a.innerText=e,t.forEach((e=>{l.appendChild(H(e))}));let d=document.querySelector(".btn-add-task"),c=document.querySelector(".btn-edit-project"),o=document.querySelector(".btn-delete-project");"All tasks"==e||"Today"==e||"This week"==e?(d.style.display="none",c.style.display="none",o.style.display="none"):(d.style.display="block",c.style.display="block",o.style.display="block")}(i,e)}}function $(){let e=!1,t=!1,n=document.querySelector(".project-name-input-edit").value,a=document.querySelector(`[id="${o.title}" ]`),l=a.querySelector(".number-of-tasks");e=L(n),e&&(t=!0,o.title=n,a.id=n,a.textContent=n,l.textContent="         "+String(o.tasks.length),a.textContent=a.textContent+l.textContent,localStorage.setItem("allProjects",JSON.stringify(f))),F(t)}function F(e){1==e&&(p.textContent=u.value),p.style.display="block",u.style.display="none",r.style.display="block",s.style.display="block",m.style.display="none",h.style.display="none"}function U(){for(let e=0;e<f.length;e++){let t=f[e];o.id==t.id&&(f.splice(e,1),localStorage.setItem("allProjects",JSON.stringify(f)),location.reload())}}function _(){y.style.display="none"}f||(f=[]),localStorage.getItem("allProjects")&&(f=localStorage.getItem("allProjects"),f=JSON.parse(f),f.forEach((e=>{b(e)}))),P(),O(),D();let z=document.querySelectorAll(".menu-options > li"),B=z[0];z.forEach((e=>{e.addEventListener("click",Y)})),B.click();let G=document.querySelector(".btn-addProject");G.addEventListener("click",(function(){null==document.querySelector(".new-project-container")&&C.appendChild(function(){l=document.createElement("div"),l.classList.add("new-project-container");let e=document.createElement("input");e.setAttribute("maxLength",25);let t=document.createElement("button");t.innerText="Add project",t.addEventListener("click",S);let n=document.createElement("button");return n.innerText="Cancel",n.addEventListener("click",E),l.appendChild(e),l.appendChild(t),l.appendChild(n),l}())}));let K=document.createElement("i");K.classList.add("fa"),K.classList.add("fa-plus"),G.appendChild(K),document.querySelector(".btn-edit-project").addEventListener("click",(function(){!function(){r=document.querySelector(".btn-edit-project"),s=document.querySelector(".btn-delete-project"),r.style.display="none",s.style.display="none";let e=document.querySelector(".project-title-btns");u=document.querySelector(".project-name-input-edit"),p=document.querySelector(".project-name"),u.style.display="block",u.value=p.textContent,p.style.display="none",m=document.createElement("button"),m.textContent="Done",h=document.createElement("button"),h.textContent="Cancel",m.addEventListener("click",$),h.addEventListener("click",(function(){F(!1)})),e.appendChild(m),e.appendChild(h)}()})),document.querySelector(".btn-delete-project").addEventListener("click",(function(){!function(){let e=document.querySelector(".tasks-container");y=document.createElement("div"),y.classList.add("confirmation-modal"),k=document.createElement("div"),k.classList.add("confirmation-container");let t=document.createElement("span");t.textContent="Are you sure that you want to delete the whole project?";let n=document.createElement("button");n.textContent="Yes",n.addEventListener("click",U);let a=document.createElement("button");a.textContent="No",a.addEventListener("click",_),k.appendChild(t),k.appendChild(n),k.appendChild(a),y.appendChild(k),e.insertAdjacentElement("beforebegin",y)}()}));let Q=document.querySelector(".btn-add-task");Q.addEventListener("click",(function(){document.querySelector(".tasks-container").appendChild(q("add",null))}));let R=document.createElement("i");R.classList.add("fa"),R.classList.add("fa-plus-circle"),Q.appendChild(R)})();