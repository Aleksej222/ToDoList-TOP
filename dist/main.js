(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{c:()=>r,U:()=>w});class t{constructor(e,t,n){this.id=e,this.title=t,this.tasks=n}}function n(){return Math.floor(1e8*Math.random())}let a,l,d,c,r,i=document.querySelector(".projects");function o(){a.outerHTML=""}function s(){let e=!1,l=!1,d=n(),c=a.querySelector("input").value,i=new t(d,c,[]);l=function(e){let t=!1,n="",a=function(e){let t=!1;return r.map((n=>{n.title.toLowerCase()==e.toLowerCase()&&(t=!0)})),t}(e.title);a&&(n="Project with that name already exists.");let l=e.title.length<1;l&&(n="Project name can't be empty.");let d=function(e){return e.length>=25}(e.title);return d&&(n="Project name is too long."),document.querySelector(".error-message").innerText=n,t=0==a,t=t&&0==l,t=t&&0==d,t}(i),l&&(e=!0,r.push(i),localStorage.setItem("allProjects",JSON.stringify(r))),e&&u(i),o()}function u(e){let t=i.querySelector("ul"),n=document.createElement("li");n.classList.add("project"),n.innerText=e.title,n.setAttribute("id",e.title);let a=document.createElement("span");a.classList.add("number-of-tasks"),a.innerText="         "+e.tasks.length,n.appendChild(a),t.appendChild(n),i.appendChild(t)}r||(r=[]);class p{constructor(e,t,n,a,l){this.id=e,this.title=t,this.date=a,this.description=n,this.priority=l}}function m(){const e=new Date;let t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate();return n<10&&(n="0"+n),a<10&&(a="0"+a),t.toString()+"-"+n.toString()+"-"+a.toString()}function h(e,t){const n=document.createElement("div");n.classList.add("modal-window");const a=document.createElement("div");a.classList.add("modal-top");let l=document.createElement("h3");"add"==e?l.innerText="Add New Task":"update"==e&&(l.innerText="Update Task");let d=document.createElement("span");d.classList.add("close-modal"),d.innerText="&times;  ",a.appendChild(l),a.appendChild(d);let c=document.createElement("div");c.classList.add("container-task-info");let i=document.createElement("form"),o=document.createElement("span");o.innerText="*";let s=document.createElement("div");s.classList.add("container-input");let u=document.createElement("label");u.innerText="Title",u.appendChild(o);let p=document.createElement("input");p.classList.add("task-name"),"update"==e&&(p.value=t.title);let h=document.createElement("span");h.classList.add("error-message"),h.appendChild(o),s.appendChild(u),s.appendChild(p),s.appendChild(h);let C=document.createElement("div");C.classList.add("container-input");let E=document.createElement("label");E.innerText="Date",E.appendChild(o);let S=document.createElement("input");if(S.type="date",S.classList.add("task-date"),"update"==e)S.value=t.date;else if("add"==e){let e=m();S.value=e}let g=document.createElement("span");g.classList.add("error-message"),g.appendChild(o),C.appendChild(E),C.appendChild(S),C.appendChild(g);let v=document.createElement("div");v.classList.add("container-input");let b=document.createElement("label");b.innerText="Description",b.appendChild(o);let L=document.createElement("textarea");L.classList.add("task-description"),"update"==e&&(L.value=t.description);let T=document.createElement("span");T.classList.add("error-message"),T.appendChild(o),v.appendChild(b),v.appendChild(L),v.appendChild(T);let x=document.createElement("div");x.classList.add("container-input");let j=document.createElement("label");j.innerText="Priority",j.appendChild(o);let w=document.createElement("select");w.classList.add("task-priority");let A=document.createElement("option");A.innerText="Low",A.setAttribute("value","low"),A.setAttribute("selected","selected");let P=document.createElement("option");P.innerText="Medium",P.setAttribute("value","medium");let D=document.createElement("option");D.innerText="High",D.setAttribute("value","high"),w.appendChild(A),w.appendChild(P),w.appendChild(D),"update"==e&&(w.value=t.priority);let O=document.createElement("span");O.classList.add("error-message"),O.appendChild(o),x.appendChild(j),x.appendChild(w),x.appendChild(O);let M=document.createElement("button");M.setAttribute("type","submit"),"add"==e?(M.innerText="Add task",M.addEventListener("click",q)):"update"==e&&(M.innerText="Update task",M.addEventListener("click",(function(e){e.preventDefault(),function(e){let t=document.querySelector("input.task-name").value,n=document.querySelector("input.task-date").value,a=document.querySelector("textarea.task-description").value,l=document.querySelector("select.task-priority").value;e.title=t,e.date=n,e.description=a,e.priority=l;let d=!1;d=y(e),d&&(localStorage.setItem("allProjects",JSON.stringify(r)),f())}(t)})));let I=document.createElement("button");return I.innerText="Cancel",I.setAttribute("type","button"),I.addEventListener("click",k),i.appendChild(s),i.appendChild(C),i.appendChild(v),i.appendChild(x),i.appendChild(M),i.appendChild(I),c.appendChild(i),n.appendChild(a),n.appendChild(c),n}function k(){document.querySelector(".modal-window").remove()}function f(){let e=document.querySelector(".project-name").textContent,t=document.querySelector(`[id="${e}" ]`);t.addEventListener("click",x),t.click()}function y(e){let t=!0,n="";return e.title.length<1&&(n="Task name can't be empty."),e.title.length>30&&(n="Task name can't be longer than 30 characters."),e.description.length>300&&(n="Task description can't be longer than 300 characters."),t=""==n,t||alert(n),t}function C(){return l=[],r.forEach((e=>{e.tasks.forEach((e=>{l.push(e)}))})),l}function E(){let e=C();document.querySelector(".all-tasks-number-of-tasks").textContent=e.length}function S(){let e=[],t=m();return l.forEach((n=>{n.date==t&&e.push(n)})),e}function g(){let e=S();document.querySelector(".today-tasks-number-of-tasks").textContent=e.length}function v(){let e=[],t=m(),n=function(){const e=new Date;let t=new Date(e.getTime()-6048e5),n=t.getFullYear(),a=t.getMonth()+1,l=t.getDate();return a<10&&(a="0"+a),l<10&&(l="0"+l),t=n.toString()+"-"+a.toString()+"-"+l.toString(),t}();return l.forEach((a=>{a.date<=t&&a.date>=n&&e.push(a)})),e}function b(){let e=v();document.querySelector(".this-week-tasks-number-of-tasks").textContent=e.length}function L(e,t){let n=document.querySelector(`[id="${d.title}" ]`).querySelector(".number-of-tasks");return n.textContent=t,"increase"==e?w++:"decrease"==e&&w--,E(),g(),b(),n}function q(e){e.preventDefault();let t=n(),a=document.querySelector("input.task-name").value,l=document.querySelector("input.task-date").value,c=document.querySelector("textarea.task-description").value,i=document.querySelector("select.task-priority").value,o=document.querySelector(".tasks-container").querySelector(".tasks-list"),s=!1,u=!1,m=new p(t,a,c,l,i);u=y(m),u&&(s=!0,d.tasks.push(m),L("increase",d.tasks.length)),s&&(k(),o.appendChild(T(m)),localStorage.setItem("allProjects",JSON.stringify(r)))}function T(e){let t=document.createElement("div");t.classList.add("task");let n=document.createElement("span");n.classList.add("task-date"),n.innerText=e.date;let a=document.createElement("h4");a.classList.add("task-title"),a.innerText=e.title;let l=document.createElement("span");l.classList.add("task-description"),l.innerText=e.description;let d=document.createElement("div");d.classList.add("tasks-btns");let c=document.createElement("button");c.classList.add("btn-edit-task"),c.innerText="pen",c.addEventListener("click",(function(){!function(e){document.querySelector(".tasks-container").appendChild(h("update",e))}(e)}));let i=document.createElement("button");return i.classList.add("btn-delete-task"),i.innerText="trash-can",i.addEventListener("click",(function(){!function(e){for(let t=0;t<r.length;t++){let n=r[t].tasks;for(let a=0;a<n.length;a++){let l=n[a];e.id==l.id&&(r[t].tasks.splice(a,1),localStorage.setItem("allProjects",JSON.stringify(r)),L("decrease",r[t].tasks.length))}}f()}(e)})),d.appendChild(c),d.appendChild(i),t.appendChild(n),t.appendChild(a),t.appendChild(l),t.appendChild(d),t}function x(){let e;switch(c=this.id,c){case"All tasks":e=C();break;case"Today":e=S();break;case"This week":e=v();break;default:e=function(e){let t=r.find((t=>t.title==e));return d=t,t.tasks}(c)}document.querySelector(".tasks-list").innerHTML="",function(e,t){let n=document.querySelector(".tasks-container"),a=n.querySelector(".project-name"),l=n.querySelector(".tasks-list");a.innerText=e,t.forEach((e=>{l.appendChild(T(e))})),document.querySelector(".btn-add-task").style.display="All tasks"==e||"Today"==e||"This week"==e?"none":"block"}(c,e)}function j(){document.querySelector(".project-name-input-edit").value}r||(r=[]);let w=0;localStorage.getItem("allProjects")&&(r=localStorage.getItem("allProjects"),r=JSON.parse(r),r.forEach((e=>{u(e)}))),E(),g(),b();let A=document.querySelectorAll(".menu-options > li"),P=A[0];A.forEach((e=>{e.addEventListener("click",x)})),P.click(),document.querySelector(".btn-addProject").addEventListener("click",(function(){null==document.querySelector(".new-project-container")&&i.appendChild(function(){a=document.createElement("div"),a.classList.add("new-project-container");let e=document.createElement("input");e.setAttribute("maxLength",25);let t=document.createElement("button");t.innerText="Add project",t.addEventListener("click",s);let n=document.createElement("button");return n.innerText="Cancel",n.addEventListener("click",o),a.appendChild(e),a.appendChild(t),a.appendChild(n),a}())})),document.querySelector(".btn-edit-project").addEventListener("click",(function(){!function(){let e=document.querySelector(".project-title-container"),t=document.querySelector(".project-name-input-edit"),n=document.querySelector(".project-name");t.style.display="block",t.value=n.textContent,n.style.display="none";let a=document.createElement("button");a.textContent="Check",a.addEventListener("click",j),e.insertAdjacentElement("afterbegin",a)}()})),document.querySelector(".btn-add-task").addEventListener("click",(function(){document.querySelector(".tasks-container").appendChild(h("add",null))}))})();