(()=>{"use strict";var e={d:(t,n)=>{for(var l in n)e.o(n,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:n[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}};e.d({},{c:()=>k});var t={};e.r(t),e.d(t,{c:()=>k});class n{constructor(e,t,n){this.id=e,this.title=t,this.tasks=n}}function l(){return Math.floor(1e8*Math.random())}let a,d,c,o,r,i,s,u,p,m,h,y,k,f=document.querySelector(".projects");function C(){a.outerHTML=""}function E(){let e=!1,t=!1,d=l(),c=a.querySelector("input").value,o=new n(d,c,[]);t=b(o.title),t&&(e=!0,k.push(o),localStorage.setItem("allProjects",JSON.stringify(k))),e&&S(o),C()}function S(e){let t=f.querySelector("ul"),n=document.createElement("li");n.classList.add("project"),n.innerText=e.title,n.setAttribute("id",e.title);let l=document.createElement("span");l.classList.add("number-of-tasks"),l.innerText="         "+e.tasks.length,n.appendChild(l),t.appendChild(n),f.appendChild(t)}function b(e){let t=!1,n="",l=function(e){let t=!1;return k.map((n=>{n.title.toLowerCase()==e.toLowerCase()&&(t=!0)})),t}(e);l&&(n="Project with that name already exists.");let a=e.length<1;a&&(n="Project name can't be empty.");let d=e.length>=25;d&&(n="Project name is too long.");let c=function(e){let t="all tasks"==e.toLowerCase();return t=t||"today"==e.toLowerCase(),t=t||"this week"==e.toLowerCase(),t}(e);return c&&(n="Project name can't be the same as the main option name."),document.querySelector(".error-message").innerText=n,t=0==l,t=t&&0==a,t=t&&0==d,t=t&&0==c,t}k||(k=[]);class g{constructor(e,t,n,l,a){this.id=e,this.title=t,this.date=l,this.description=n,this.priority=a}}function v(){const e=new Date;let t=e.getFullYear(),n=e.getMonth()+1,l=e.getDate();return n<10&&(n="0"+n),l<10&&(l="0"+l),t.toString()+"-"+n.toString()+"-"+l.toString()}function L(e,t){const n=document.createElement("div");n.classList.add("modal-window");const l=document.createElement("div");l.classList.add("modal-top");let a=document.createElement("h3");"add"==e?a.innerText="Add New Task":"update"==e&&(a.innerText="Update Task");let d=document.createElement("span");d.classList.add("close-modal"),d.innerText="&times;  ",l.appendChild(a),l.appendChild(d);let c=document.createElement("div");c.classList.add("container-task-info");let o=document.createElement("form"),r=document.createElement("span");r.innerText="*";let i=document.createElement("div");i.classList.add("container-input");let s=document.createElement("label");s.innerText="Title",s.appendChild(r);let u=document.createElement("input");u.classList.add("task-name"),"update"==e&&(u.value=t.title);let p=document.createElement("span");p.classList.add("error-message"),p.appendChild(r),i.appendChild(s),i.appendChild(u),i.appendChild(p);let m=document.createElement("div");m.classList.add("container-input");let h=document.createElement("label");h.innerText="Date",h.appendChild(r);let y=document.createElement("input");if(y.type="date",y.classList.add("task-date"),"update"==e)y.value=t.date;else if("add"==e){let e=v();y.value=e}let f=document.createElement("span");f.classList.add("error-message"),f.appendChild(r),m.appendChild(h),m.appendChild(y),m.appendChild(f);let C=document.createElement("div");C.classList.add("container-input");let E=document.createElement("label");E.innerText="Description",E.appendChild(r);let S=document.createElement("textarea");S.classList.add("task-description"),"update"==e&&(S.value=t.description);let b=document.createElement("span");b.classList.add("error-message"),b.appendChild(r),C.appendChild(E),C.appendChild(S),C.appendChild(b);let g=document.createElement("div");g.classList.add("container-input");let L=document.createElement("label");L.innerText="Priority",L.appendChild(r);let j=document.createElement("select");j.classList.add("task-priority");let w=document.createElement("option");w.innerText="Low",w.setAttribute("value","low"),w.setAttribute("selected","selected");let P=document.createElement("option");P.innerText="Medium",P.setAttribute("value","medium");let A=document.createElement("option");A.innerText="High",A.setAttribute("value","high"),j.appendChild(w),j.appendChild(P),j.appendChild(A),"update"==e&&(j.value=t.priority);let O=document.createElement("span");O.classList.add("error-message"),O.appendChild(r),g.appendChild(L),g.appendChild(j),g.appendChild(O);let D=document.createElement("button");D.setAttribute("type","submit"),"add"==e?(D.innerText="Add task",D.addEventListener("click",M)):"update"==e&&(D.innerText="Update task",D.addEventListener("click",(function(e){e.preventDefault(),function(e){let t=document.querySelector("input.task-name").value,n=document.querySelector("input.task-date").value,l=document.querySelector("textarea.task-description").value,a=document.querySelector("select.task-priority").value;e.title=t,e.date=n,e.description=l,e.priority=a;let d=!1;d=T(e),d&&(localStorage.setItem("allProjects",JSON.stringify(k)),x())}(t)})));let N=document.createElement("button");return N.innerText="Cancel",N.setAttribute("type","button"),N.addEventListener("click",q),o.appendChild(i),o.appendChild(m),o.appendChild(C),o.appendChild(g),o.appendChild(D),o.appendChild(N),c.appendChild(o),n.appendChild(l),n.appendChild(c),n}function q(){document.querySelector(".modal-window").remove()}function x(){let e=document.querySelector(".project-name").textContent,t=document.querySelector(`[id="${e}" ]`);t.addEventListener("click",J),t.click()}function T(e){let t=!0,n="";return e.title.length<1&&(n="Task name can't be empty."),e.title.length>30&&(n="Task name can't be longer than 30 characters."),e.description.length>300&&(n="Task description can't be longer than 300 characters."),t=""==n,t||alert(n),t}function j(){return d=[],k.forEach((e=>{e.tasks.forEach((e=>{d.push(e)}))})),d}function w(){let e=j();document.querySelector(".all-tasks-number-of-tasks").textContent=e.length}function P(){let e=[],t=v();return d.forEach((n=>{n.date==t&&e.push(n)})),e}function A(){let e=P();document.querySelector(".today-tasks-number-of-tasks").textContent=e.length}function O(){let e=[],t=v(),n=function(){const e=new Date;let t=new Date(e.getTime()-6048e5),n=t.getFullYear(),l=t.getMonth()+1,a=t.getDate();return l<10&&(l="0"+l),a<10&&(a="0"+a),t=n.toString()+"-"+l.toString()+"-"+a.toString(),t}();return d.forEach((l=>{l.date<=t&&l.date>=n&&e.push(l)})),e}function D(){let e=O();document.querySelector(".this-week-tasks-number-of-tasks").textContent=e.length}function N(e,n){let l=document.querySelector(`[id="${c.title}" ]`).querySelector(".number-of-tasks");return l.textContent=n,"increase"==e?t.totalNumberOfTasks++:"decrease"==e&&t.totalNumberOfTasks--,w(),A(),D(),l}function M(e){e.preventDefault();let t=l(),n=document.querySelector("input.task-name").value,a=document.querySelector("input.task-date").value,d=document.querySelector("textarea.task-description").value,o=document.querySelector("select.task-priority").value,r=document.querySelector(".tasks-container").querySelector(".tasks-list"),i=!1,s=!1,u=new g(t,n,d,a,o);s=T(u),s&&(i=!0,c.tasks.push(u),N("increase",c.tasks.length)),i&&(q(),r.appendChild(I(u)),localStorage.setItem("allProjects",JSON.stringify(k)))}function I(e){let t=document.createElement("div");t.classList.add("task");let n=document.createElement("span");n.classList.add("task-date"),n.innerText=e.date;let l=document.createElement("h4");l.classList.add("task-title"),l.innerText=e.title;let a=document.createElement("span");a.classList.add("task-description"),a.innerText=e.description;let d=document.createElement("div");d.classList.add("tasks-btns");let o=document.createElement("button");o.classList.add("btn-edit-task"),o.innerText="pen",o.addEventListener("click",(function(){!function(e){document.querySelector(".tasks-container").appendChild(L("update",e))}(e)}));let r=document.createElement("button");return r.classList.add("btn-delete-task"),r.innerText="trash-can",r.addEventListener("click",(function(){!function(e){for(let t=0;t<k.length;t++){let n=k[t].tasks;for(let l=0;l<n.length;l++){let a=n[l];e.id==a.id&&(k[t].tasks.splice(l,1),c=k[t],N("decrease",k[t].tasks.length))}}x()}(e)})),d.appendChild(o),d.appendChild(r),t.appendChild(n),t.appendChild(l),t.appendChild(a),t.appendChild(d),t}function J(){let e;if(console.log("called??"),"none"!=document.querySelector(".project-name").style.display){switch(o=this.id,o){case"All tasks":e=j();break;case"Today":e=P();break;case"This week":e=O();break;default:e=function(e){let t=k.find((t=>t.title==e));return c=t,t.tasks}(o)}document.querySelector(".tasks-list").innerHTML="",function(e,t){let n=document.querySelector(".tasks-container"),l=n.querySelector(".project-name"),a=n.querySelector(".tasks-list");l.innerText=e,t.forEach((e=>{a.appendChild(I(e))}));let d=document.querySelector(".btn-add-task"),c=document.querySelector(".btn-edit-project"),o=document.querySelector(".btn-delete-project");"All tasks"==e||"Today"==e||"This week"==e?(d.style.display="none",c.style.display="none",o.style.display="none"):(d.style.display="block",c.style.display="block",o.style.display="block")}(o,e)}}function H(){let e=!1,t=!1,n=document.querySelector(".project-name-input-edit").value,l=document.querySelector(`[id="${c.title}" ]`),a=l.querySelector(".number-of-tasks");e=b(n),e&&(t=!0,c.title=n,l.id=n,l.textContent=n,a.textContent="         "+String(c.tasks.length),l.textContent=l.textContent+a.textContent,localStorage.setItem("allProjects",JSON.stringify(k))),Y(t)}function Y(e){1==e&&(u.textContent=s.value),u.style.display="block",s.style.display="none",r.style.display="block",i.style.display="block",p.style.display="none",m.style.display="none"}function $(){for(let e=0;e<k.length;e++){let t=k[e];c.id==t.id&&(k.splice(e,1),localStorage.setItem("allProjects",JSON.stringify(k)),location.reload())}}function F(){h.style.display="none"}k||(k=[]),localStorage.getItem("allProjects")&&(k=localStorage.getItem("allProjects"),k=JSON.parse(k),k.forEach((e=>{S(e)}))),w(),A(),D();let U=document.querySelectorAll(".menu-options > li"),_=U[0];U.forEach((e=>{e.addEventListener("click",J)})),_.click(),document.querySelector(".btn-addProject").addEventListener("click",(function(){null==document.querySelector(".new-project-container")&&f.appendChild(function(){a=document.createElement("div"),a.classList.add("new-project-container");let e=document.createElement("input");e.setAttribute("maxLength",25);let t=document.createElement("button");t.innerText="Add project",t.addEventListener("click",E);let n=document.createElement("button");return n.innerText="Cancel",n.addEventListener("click",C),a.appendChild(e),a.appendChild(t),a.appendChild(n),a}())})),document.querySelector(".btn-edit-project").addEventListener("click",(function(){!function(){r=document.querySelector(".btn-edit-project"),i=document.querySelector(".btn-delete-project"),r.style.display="none",i.style.display="none";let e=document.querySelector(".project-title-btns");s=document.querySelector(".project-name-input-edit"),u=document.querySelector(".project-name"),s.style.display="block",s.value=u.textContent,u.style.display="none",p=document.createElement("button"),p.textContent="Done",m=document.createElement("button"),m.textContent="Cancel",p.addEventListener("click",H),m.addEventListener("click",(function(){Y(!1)})),e.appendChild(p),e.appendChild(m)}()})),document.querySelector(".btn-delete-project").addEventListener("click",(function(){!function(){let e=document.querySelector(".tasks-container");h=document.createElement("div"),h.classList.add("confirmation-modal"),y=document.createElement("div"),y.classList.add("confirmation-container");let t=document.createElement("span");t.textContent="Are you sure that you want to delete the whole project?";let n=document.createElement("button");n.textContent="Yes",n.addEventListener("click",$);let l=document.createElement("button");l.textContent="No",l.addEventListener("click",F),y.appendChild(t),y.appendChild(n),y.appendChild(l),h.appendChild(y),e.insertAdjacentElement("beforebegin",h)}()})),document.querySelector(".btn-add-task").addEventListener("click",(function(){document.querySelector(".tasks-container").appendChild(L("add",null))}))})();